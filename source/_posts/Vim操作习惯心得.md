----
title: Vim操作习惯心得
date: 2016-07-21 18:29:45
tags:
- Editor
----
###  Normal Mode

1. 灵活选择`w`和`W`，`b`和`B`，`e`和`E`，`ge`和`gE`

1.  用插入替代移动。
  - 用C代替c$
  - 用s代替cl
  - 用S代替^C
  - 用I代替^i
  - 用A代替$a

1. 重复修改时，移动光标后用`.`来修改。
  场景：多处符号修改

1. 多行操作，操作符后尽量接 motion。
  场景：多行缩进调整用`>G`。

1. 运用`;`+`.`作多处同类型修改
  场景：改`var foo = "method("+argument1+","+argument2+")";`为
`var foo = "method(" + argument1 + "," + argument2 + ")";`

1. 用`daw`替代`dbx`或`bdw`来修改单词，可以不用限定光标位置，并且可以用`.`来重复。

1. 用&#60;C-a&#62;和&#60;C-x&#62;来修改数字易于复用。
  `set nrformats=`
  - octal：识别“0”开头的数字为八进制，默认值（比如007+1=010）
  - alpha：字母可以增减
  - hex：识别“0x”开头的数字为十六进制
  - 空值：可以取消八进制数值运算

1. 用`dw..`来重复优于用`d3w`重复。

1. 用`yf{char}`或`yt{char}`快速复制多个单词 

1. "_d{motion}|删除信息不会记录在寄存器中

1. 重复与撤销

目的|动作|重复|撤销
---|---|---|---
修改|- |.|u
行内查找字符|f/t/F/T|;|,
寻找字符串|/string|n|N
命令行动作|:s/old/new/g|& 或 @:|u
寄存器动作|qx{act}q|@x 或 @@|u



### Insert Mode

1. 在 Insert 模式下更好的删除方法

按键|效果
---|---
&#60;C-h&#62;|向后删除一个字符
&#60;C-w&#62;|向后删除一个单词
&#60;C-u&#62;|向后删除整行

1. &#60;C-r&#62; 的一些用法

按键|效果
---|---
&#60;C-r&#62;{reg}|寄存器粘贴
&#60;=1+1&#62;|输入计算后数值
&#60;C-v{code}&#62;|用十进制代码输入符号
&#60;C-v&#62;u{code}|用十六进制代码输入符号
normal下：ga|查询符号代码
normal下：g^G|查询字数统计
&#60;C-v&#62;{nondigit}|按下按键，输入按键代码
&#60;C-k&#62;{char1}{char2}|插入特殊符号
:help digraph-table|查询符号表
 
###  Replace Mode

1. 关于 Tab 在重新模式中的区别
  - r：依照字符数量重写，一个 Tab 当做一个字符来处理
  - gr：依照字符长度来重写，一个 Tab 当做相应的字符长度来处理 
1. 多文件处理
  - 指定操作文件范围
    ```
    :args *.txt
    ```
  - 对指定文件批量操作。
    ```
    :argdo %s/\(foo([^)]*\))/\1, NULL)/g | update
    ```
  - 对所有缓冲区(已打开的文件)批量操作。
    ```
    :bufdo %s/\(foo([^)]*\))/\1, NULL)/g | update
    ```
1. 行模式和替换模式协同操作。
  ```
  :%g/bar/s/\(foo([^)]*\))/\1, NULL)/g
  :%g!/bar/s/\(foo([^)]*\))/\1, NULL)/g
  ```


### Visual Mode

按键|效果
---|---
gv|恢复上一次 Visual 模式下的选择
o|转换选择模式光标
u|转换为小写字母
U|转换为大写字母
~|大小写切换

注意：
`v`/`V`可以配合查询一起使用，如：`V/^a`。

###  Command Line Mode
1. Insert 模式下的很多输入方式在command line  模式下依然适用


按键|效果
---|---
&#60;C-d&#62;|显示设置选项
&#60;C-r&#62;&#60;C-f&#62;|在命令行中输入光标下的文件名
&#60;C-r&#62;&#60;C-p&#62;|在命令行中输入光标下文件的 PATH
&#60;C-r&#62;&#60;C-w&#62;|在命令行中输入光标下的单词
&#60;C-r&#62;&#60;C-a&#62;|在命令行中输入光标下的字符串

1. vimgrep：用 quickfix 作TOC
```
：vimgrep /正则表达式/g *
：cw
```

### 宏

1. 用宏处理序列问题
  1.  编写单行宏
    ```
    :let i=1
    qa
    I&#60;C-r&#62;=i&#60;CR&#62;) &#60;ESC&#62;
    :let i+=1
    q
    ```
  1. 选择所有待处理行
  1. 批量处理
    ```
    :'<,'>normal @a
    ```


***
**本文相关**
1. 参考
[Practical Vim](https://book.douban.com/subject/10599776/)
