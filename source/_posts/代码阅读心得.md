----
title: 代码阅读心得
date: 2016-07-21 18:38:44
tags:
- Learn
----
title: 代码阅读心得
date: 2016-06-16

## 阅读流程
1. **文档阶段**
  本阶段重点在于知道代码的总体功能，解决开发环境的问题。
  1. 阅读设计文档。
1. **功能阶段**
  本阶段重点在于理解程序的实现方法，对代码从结构到模块，有整体理解。
  1. 按照组织结构，架构，功能模块的顺序分解代码。
  1. 以每个模块的入口代码为起点，绘制功能流程图，必要时记录相关链接。
  1. 依次在每个模块下逐级绘制功能流程图。
  注意：
  - 因为刚开始不了解整体代码，所以有些功能的意义不明朗，暂时记录就好，不用纠结功能的合理性。
1. **函数阶段**
  本阶段的重点在于理解要点难点函数。
  1. 在看模块的过程中，记录疑问。
  1. 看被反复调用的函数。
  1. 看模块中主要分支的各个函数，忽略次要分支。
  1. 逐一解决之前记录的疑问。
  注意：
  - 次要函数略过，如错误处理的代码、罕见情况的处理等
  - 对于多层嵌套函数，先弄清楚主函数的功能，暂时不用深究函数内嵌套函数的意义，必须代码整体有概念后，研究细节才有意义，细节函数可以之后再看。
  - 读函数，从函数输入参数，函数输出来入手。
  - 对于不清楚的函数，用断点检测值法，或者log，来理解函数的逻辑和写法。
  - 看项目的测试用例来了解代码的核心功能用法。
  - 语法问题暂时忽略，到debug 或需要改写的时候再关注。

注意：
以上流程并非需要一步步完成，碰到简单的代码，可以几步合并为一步来完成。

## 感悟
- 读别人代码是不那么舒服的，但这是不可避免的过程，也是一种稀缺能力。
- 刚拿到别人的代码，自然是搞不懂他在干什么，看代码的时候，必须忍受这种掌控感的缺失。
- 虽然细节也很重要，但是只有把整体把握了，才能坚持把细节看下去。
- 注意程序的命令规则和书写习惯，若程序由多名开发者完成，则阅读难度会更大一些。

***
**本文相关**
1. 参考
1. 修订
2016:第一版
